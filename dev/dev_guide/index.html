<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dev Guide · Discorder.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Discorder.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">User guide</a></li><li><a class="tocitem" href="../api/">Reference</a></li><li><span class="tocitem">Developer Docs</span><ul><li class="is-active"><a class="tocitem" href>Dev Guide</a><ul class="internal"><li><a class="tocitem" href="#Generating-BrokenRecord-data-files"><span>Generating BrokenRecord data files</span></a></li><li><a class="tocitem" href="#Productivity-tools"><span>Productivity tools</span></a></li><li><a class="tocitem" href="#Best-practices"><span>Best practices</span></a></li></ul></li><li><a class="tocitem" href="../control_plane/">Control Plane Design</a></li><li><a class="tocitem" href="../ideas/">Ideas</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer Docs</a></li><li class="is-active"><a href>Dev Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dev Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tk3369/Discorder.jl/blob/master/docs/src/dev_guide.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Developer-Guide"><a class="docs-heading-anchor" href="#Developer-Guide">Developer Guide</a><a id="Developer-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-Guide" title="Permalink"></a></h1><h2 id="Generating-BrokenRecord-data-files"><a class="docs-heading-anchor" href="#Generating-BrokenRecord-data-files">Generating BrokenRecord data files</a><a id="Generating-BrokenRecord-data-files-1"></a><a class="docs-heading-anchor-permalink" href="#Generating-BrokenRecord-data-files" title="Permalink"></a></h2><p>The test suite uses BrokenRecord.jl to capture HTTP responses so that subsequent tests can be executed more quickly (as well as being able to test in DevOps/CI without actually hitting the Discord server). If you change any tests, you must regenerate the BSON files in the test/fixtures directory.</p><p>Here&#39;s how:</p><ol><li>Define environment variable <code>DISCORD_BOT_TOKEN</code> with your own bot&#39;s token</li><li>Delete all BSON files in test/fixtures directory</li><li>Run the test suite</li><li>Commit and merge the changed BSON files</li></ol><h2 id="Productivity-tools"><a class="docs-heading-anchor" href="#Productivity-tools">Productivity tools</a><a id="Productivity-tools-1"></a><a class="docs-heading-anchor-permalink" href="#Productivity-tools" title="Permalink"></a></h2><p>Run the <code>tools/check_includes.jl</code> script to find out if any new source files are added to the src/objects but have not been included in the main objects.jl script.</p><h2 id="Best-practices"><a class="docs-heading-anchor" href="#Best-practices">Best practices</a><a id="Best-practices-1"></a><a class="docs-heading-anchor-permalink" href="#Best-practices" title="Permalink"></a></h2><p>This library makes use of async processes heavily. Some best practices include:</p><ol><li><p>Always run async code within a try/catch block and 1) display the error when an exception occurs and 2) rethrow. Why? Because exceptions are by default not displayed to the console and the task just gets to a failed state.</p></li><li><p>When you stop an async task using <code>Base.throwto</code>, you must run that with <code>@async</code>. It&#39;s needed because <code>throwto</code> function yields to a different task and never comes back to the current task.</p></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« Reference</a><a class="docs-footer-nextpage" href="../control_plane/">Control Plane Design »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 6 November 2022 05:03">Sunday 6 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
